(()=>{let t=new class{constructor(){this.buttons=[],this.isNavigating=!1,this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.setupButtons()):this.setupButtons(),this.setupMutationObserver()}setupButtons(){document.querySelectorAll("[data-back-button]").forEach(t=>{this.buttons.includes(t)||(this.setupButton(t),this.buttons.push(t))})}setupButton(e){e.addEventListener("click",t=>this.handleButtonClick(t,e)),e.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.handleButtonClick(t,e))}),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0")}handleButtonClick(t,e){t.preventDefault(),this.isNavigating||(this.isNavigating=!0,this.setLoadingState(e,!0),this.performNavigation(e))}performNavigation(e){try{this.canUseHistory()?(console.log("Back Button: Verwende Browser History"),this.navigateBack(e)):this.canUseReferrer()?(console.log("Back Button: Verwende Document Referrer"),this.navigateToReferrer(e)):(console.log("Back Button: Fallback zur Startseite"),this.navigateToHome(e))}catch(t){console.error("Back Button Navigation Error:",t),this.navigateToHome(e)}}canUseHistory(){return window.history&&1<window.history.length&&!this.isDirectEntry()}canUseReferrer(){var t=document.referrer,e=window.location.hostname;if(!t)return!1;try{return new URL(t).hostname===e}catch(t){return!1}}isDirectEntry(){return!document.referrer||window.history.length<=1||0===performance.navigation?.type}navigateBack(t){setTimeout(()=>{window.history.back(),this.resetNavigationState(t)},100)}navigateToReferrer(t){setTimeout(()=>{window.location.href=document.referrer},100)}navigateToHome(t){setTimeout(()=>{window.location.href="/"},100)}setLoadingState(t,e){e?(t.classList.add("loading"),t.setAttribute("aria-busy","true"),t.disabled=!0):(t.classList.remove("loading"),t.setAttribute("aria-busy","false"),t.disabled=!1)}resetNavigationState(t){setTimeout(()=>{this.isNavigating=!1,this.setLoadingState(t,!1)},1e3)}setupMutationObserver(){new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&(t.hasAttribute&&t.hasAttribute("data-back-button")&&(this.setupButton(t),this.buttons.push(t)),t=t.querySelectorAll&&t.querySelectorAll("[data-back-button]"))&&t.forEach(t=>{this.buttons.includes(t)||(this.setupButton(t),this.buttons.push(t))})})})}).observe(document.body,{childList:!0,subtree:!0})}triggerBackNavigation(){var t=this.buttons[0];t&&this.handleButtonClick(new Event("click"),t)}};window.backButtonManager=t,"localhost"!==window.location.hostname&&!window.location.hostname.includes("ngrok")||(window.debugBackButton=()=>{console.log("Back Button Debug Info:"),console.log("- History Length:",window.history.length),console.log("- Document Referrer:",document.referrer),console.log("- Is Direct Entry:",t.isDirectEntry()),console.log("- Can Use History:",t.canUseHistory()),console.log("- Can Use Referrer:",t.canUseReferrer()),console.log("- Active Buttons:",t.buttons.length)})})();