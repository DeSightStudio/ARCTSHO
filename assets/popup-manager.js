document.addEventListener("DOMContentLoaded",function(){if("undefined"==typeof MicroModal)console.error("MicroModal ist nicht definiert. Bitte stellen Sie sicher, dass die MicroModal-Bibliothek geladen ist.");else if(window._microModalInitialized)console.log("MicroModal bereits initialisiert, Ã¼berspringe Initialisierung");else{let i=["certificate-origin","clearance-certificate","vat-uid-tva","cart-vat-id"],o={},t=null,n=()=>{document.body.classList.remove("overflow-hidden"),document.body.style.overflow="",console.log("Body-Scrolling explizit wiederhergestellt")},r=t=>{let e=document.getElementById(t);e&&!o[t]&&(console.log(`Animation zum SchlieÃŸen von ${t} gestartet`),o[t]=!0,e.classList.add("is-closing"),setTimeout(()=>{try{e.classList.remove("is-closing"),e.setAttribute("aria-hidden","true"),e.classList.remove("is-open"),delete o[t],n(),console.log(`Animation zum SchlieÃŸen von ${t} abgeschlossen`)}catch(e){console.error(`Fehler beim SchlieÃŸen von ${t}:`,e),n(),delete o[t]}},300))};try{MicroModal.init({openTrigger:"data-micromodal-trigger",closeTrigger:"data-custom-close",disableScroll:!0,disableFocus:!1,awaitOpenAnimation:!0,awaitCloseAnimation:!1,onShow:e=>{console.log(e.id+" wird geÃ¶ffnet"),e.classList.remove("is-closing"),e.setAttribute("aria-hidden","false"),"modal-request-only"===e.id&&(console.log("Request-Only Modal wird geÃ¶ffnet - verwende gespeicherten Button"),"function"==typeof window.resetRequestOnlyModal&&window.resetRequestOnlyModal(),t?(console.log("Gespeicherter Trigger-Button gefunden:",t),console.log("Button data attributes:",t.dataset),e={id:t.dataset.productId,title:t.dataset.productTitle,url:t.dataset.productUrl,sku:t.dataset.productSku,price:t.dataset.productPrice},console.log("Produktdaten fÃ¼r Request-Only (onShow):",e),u(e),t=null):console.warn("Kein gespeicherter Request-Only Button gefunden"))},onClose:e=>(console.log(e.id+" wird durch MicroModal geschlossen"),"modal-request-only"===e.id&&"function"==typeof window.resetRequestOnlyModal&&window.resetRequestOnlyModal(),n(),!0)}),window._microModalInitialized=!0,console.log("MicroModal erfolgreich initialisiert")}catch(e){return void console.error("Fehler beim Initialisieren von MicroModal:",e)}let e=()=>{var e=document.querySelectorAll('.modal[aria-hidden="false"]'),t="hidden"===document.body.style.overflow||document.body.classList.contains("overflow-hidden");0===e.length&&t&&(console.warn("Body-Scrolling ist blockiert, obwohl keine Modals geÃ¶ffnet sind. Korrigiere..."),n())};setInterval(e,2e3),document.addEventListener("visibilitychange",()=>{document.hidden||setTimeout(e,100)}),window.closeAllModalsAndResetScroll=()=>{console.log("SchlieÃŸe alle Modals und setze Body-Scrolling zurÃ¼ck"),document.querySelectorAll('.modal[aria-hidden="false"]').forEach(e=>{e.id&&(e.setAttribute("aria-hidden","true"),e.classList.remove("is-open","is-closing"),delete o[e.id])}),n(),console.log("Alle Modals geschlossen und Body-Scrolling wiederhergestellt")},window.addEventListener("beforeunload",()=>{n()}),window.addEventListener("load",()=>{setTimeout(e,1e3)}),setTimeout(c,1e3),document.addEventListener("cart:updated",c),document.addEventListener("drawer:opened",c),document.querySelectorAll("[data-custom-close]").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();e=t.closest(".modal");e&&e.id&&(console.log(`SchlieÃŸen-Button fÃ¼r ${e.id} geklickt`),r(e.id))})}),document.querySelectorAll(".modal__overlay").forEach(t=>{t.addEventListener("click",e=>{e.target===t&&(e=t.closest(".modal"))&&e.id&&(console.log("Overlay-Klick fÃ¼r "+e.id),r(e.id))})}),document.querySelectorAll(".modal__container").forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation()})}),document.addEventListener("click",t=>{var e=t.target.closest("[data-popup]");if(e){t.preventDefault(),t.stopPropagation();t=e.getAttribute("data-popup");console.log("Data-popup Trigger geklickt:",t);try{MicroModal.show("modal-"+t)}catch(e){console.error("Fehler beim Ã–ffnen des Popup-Modals:",t,e)}}}),setTimeout(()=>{d(),s()},1e3),document.addEventListener("DOMContentLoaded",()=>{d(),s()});new MutationObserver(e=>{let t=!1;e.forEach(e=>{"childList"===e.type&&0<e.addedNodes.length&&(t=!0)}),t&&setTimeout(()=>{d(),s()},100)}).observe(document.body,{childList:!0,subtree:!0}),window.updateRequestOnlyForm=u,document.addEventListener("click",function(e){e=e.target.closest(".request-only-button");if(e){console.log("ðŸ”¥ REQUEST-ONLY BUTTON GEKLICKT!",e),console.log("ðŸ”¥ Button data attributes:",e.dataset),console.log("ðŸ”¥ MicroModal verfÃ¼gbar:","undefined"!=typeof MicroModal);e=(t=e).getAttribute("data-micromodal-trigger");if(e){console.log("ðŸ”¥ Versuche Modal zu Ã¶ffnen:",e);try{MicroModal.show(e),console.log("ðŸ”¥ Modal erfolgreich geÃ¶ffnet!")}catch(e){console.error("ðŸ”¥ FEHLER beim Ã–ffnen des Modals:",e)}}else console.error("ðŸ”¥ FEHLER: Kein data-micromodal-trigger gefunden!")}},!0),document.addEventListener("click",function(e){var t=e.target.closest('span[data-popup-repaired="true"]');if(t){t=t.getAttribute("data-popup-type");if(t){e.preventDefault(),e.stopPropagation(),console.log("Reparierter Span Ã¼ber Event-Delegation geklickt:",t);try{MicroModal.show("modal-"+t)}catch(e){console.error("Fehler beim Ã–ffnen des Popup-Modals Ã¼ber Event-Delegation:",t,e)}}}}),document.addEventListener("click",function(t){if(t.target.closest("#CartDrawer-VatIdButton")){t.preventDefault(),t.stopPropagation(),console.log("VAT-ID-Button im Cart wurde geklickt");try{MicroModal.show("modal-cart-vat-id")}catch(e){console.error("Fehler beim Ã–ffnen des VAT-ID-Modals:",e)}}else{var o=t.target.closest(".vat-info-icon[data-micromodal-trigger]");if(o){t.preventDefault(),t.stopPropagation();o=o.getAttribute("data-micromodal-trigger");if(o){console.log("VAT-Info-Icon geklickt, Ã¶ffne Modal:",o);try{MicroModal.show(o)}catch(e){console.error("Fehler beim Ã–ffnen des Modals:",o,e)}}}else{o=t.target.closest("[data-micromodal-trigger]");if(o&&!o.classList.contains("request-only-button")){t.preventDefault(),t.stopPropagation();t=o.getAttribute("data-micromodal-trigger");if(t){console.log("MicroModal-Trigger geklickt, Ã¶ffne Modal:",t);try{MicroModal.show(t)}catch(e){console.error("Fehler beim Ã–ffnen des Modals:",t,e)}}}}}}),document.addEventListener("click",t=>{if(("A"===t.target.tagName||t.target.closest("a"))&&(o=("A"===t.target.tagName?t.target:t.target.closest("a")).getAttribute("href"))&&o.startsWith("#popup-")&&(t.preventDefault(),o=o.replace("#popup-",""),i.includes(o))&&(console.log("Hash-URL Link geklickt:",o),MicroModal.show("modal-"+o)),"SPAN"===t.target.tagName&&!t.target.hasAttribute("data-popup-repaired")){var o=t.target.textContent.toLowerCase().trim();if(t.target.style.textDecoration?.includes("underline")||window.getComputedStyle(t.target).textDecoration.includes("underline")||"pointer"===t.target.style.cursor){let e=null;o.includes("ursprung")||o.includes("origin")||o.includes("origine")?e="certificate-origin":o.includes("clearance")||o.includes("negativ")||o.includes("autorizzazione")||o.includes("autorizaciÃ³n")||o.includes("dÃ©charge")?e="clearance-certificate":(o.includes("uid")||o.includes("vat")||o.includes("tva"))&&(e="vat-uid-tva"),e&&i.includes(e)&&(t.preventDefault(),t.stopPropagation(),console.log("Unreparierter Span-Link geklickt, Ã¶ffne Popup:",e),t.target.setAttribute("data-popup-repaired","true"),t.target.style.cursor="pointer",MicroModal.show("modal-"+e))}}}),document.addEventListener("keydown",e=>{"Escape"===e.key&&document.querySelectorAll('.modal[aria-hidden="false"]').forEach(e=>{e.id&&!o[e.id]&&(console.log("ESC-Taste gedrÃ¼ckt, schlieÃŸe "+e.id),r(e.id))})});var l=window.location.hash;if(l&&l.startsWith("#popup-")){let e=l.replace("#popup-","");i.includes(e)&&setTimeout(()=>{MicroModal.show("modal-"+e)},500)}let a=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.addedNodes.forEach(function(e){e.nodeType===Node.ELEMENT_NODE&&0<(e=e.querySelectorAll?e.querySelectorAll(".request-only-button"):[]).length&&console.log(e.length+" neue Request-Only Buttons in Related Products gefunden")})})});function c(){var e=document.querySelectorAll(".vat-info-icon[data-micromodal-trigger]:not([data-listener-attached])");console.log("Gefundene neue VAT-Info-Icons:",e.length),e.forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();t=this.getAttribute("data-micromodal-trigger");if(console.log("Direkter VAT-Info-Icon Klick:",t),t)try{MicroModal.show(t)}catch(e){console.error("Fehler beim Ã–ffnen des Modals (direkt):",t,e)}}),e.setAttribute("data-listener-attached","true")})}function d(){let l={"certificate-origin":["ursprungszeugnis","certificate of origin","ursprungszertifikat","certificate of origin","origin certificate","certificato di origine","certificato d'origine","certificado de origen","certificat d'origine","certificat d'origine","certificat d'origine","certificat d'origine"],"clearance-certificate":["clearance certificate","freigabezertifikat","negativbescheinigung","clearance certificate","clearance cert","certificato di sdoganamento","certificato clearance","certificato di autorizzazione","certificado de despacho","certificado clearance","certificado de autorizaciÃ³n","certificat de dÃ©douanement","certificat clearance","certificat de dÃ©charge"],"vat-uid-tva":["uid","ust-id","umsatzsteuer-id","mehrwertsteuer-id","vat id","vat number","tax id","partita iva","codice iva","nÃºmero de iva","cif","numÃ©ro de tva","tva"]};document.querySelectorAll('span[style*="text-decoration"]').forEach(e=>{if(e.style.textDecoration&&e.style.textDecoration.includes("underline")&&!e.hasAttribute("data-popup-repaired")){var o,i,n,r=e.textContent.toLowerCase().trim();let t=null;for([o,i]of Object.entries(l)){for(var a of i)if(r.includes(a.toLowerCase())){console.log(`Pattern-Match gefunden: "${r}" enthÃ¤lt "${a}" -> `+o),t=o;break}if(t)break}t||(r.includes("certificat")&&r.includes("origine")?(console.log("Spezielle Erkennung: FranzÃ¶sisches Certificate of Origin -> "+r),t="certificate-origin"):r.includes("certificat")&&r.includes("dÃ©charge")&&(console.log("Spezielle Erkennung: FranzÃ¶sisches Clearance Certificate -> "+r),t="clearance-certificate")),t&&(e.setAttribute("data-popup-repaired","true"),e.setAttribute("data-popup-type",t),e.style.cursor="pointer",e.setAttribute("title","Klicken zum Ã–ffnen"),n=e.cloneNode(!0),e.parentNode.replaceChild(n,e),n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("Reparierter Popup-Link geklickt:",t);try{MicroModal.show("modal-"+t)}catch(e){console.error("Fehler beim Ã–ffnen des reparierten Popup-Modals:",t,e)}}))}}),document.querySelectorAll("span").forEach(e=>{if(!e.hasAttribute("data-popup-repaired")){var o=e.textContent.toLowerCase().trim(),i=e.style.textDecoration&&e.style.textDecoration.includes("underline"),t=window.getComputedStyle(e).textDecoration.includes("underline")||window.getComputedStyle(e).color!==window.getComputedStyle(e.parentElement).color;if((i||t)&&!e.hasAttribute("data-popup-repaired")){let t=null;for(var[n,r]of Object.entries(l)){for(var a of r)if(o.includes(a.toLowerCase())){t=n;break}if(t)break}t&&(e.setAttribute("data-popup-repaired","true"),e.setAttribute("data-popup-type",t),e.style.cursor="pointer",e.setAttribute("title","Klicken zum Ã–ffnen"),i=e.cloneNode(!0),e.parentNode.replaceChild(i,e),i.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("Hash-Span Popup-Link geklickt:",t);try{MicroModal.show("modal-"+t)}catch(e){console.error("Fehler beim Ã–ffnen des Hash-Span Popup-Modals:",t,e)}}),console.log(`Hash-Span Popup-Link repariert: "${e.textContent.trim()}" -> `+t))}}})}function s(){document.querySelectorAll("span").forEach(e=>{if(!e.hasAttribute("data-popup-repaired")){var o=e.textContent.trim(),i="pointer"===e.style.cursor||e.style.textDecoration?.includes("underline")||"pointer"===window.getComputedStyle(e).cursor||window.getComputedStyle(e).textDecoration.includes("underline"),n=e.parentElement?.textContent?.toLowerCase()||"",n=n.includes("mammoth")||n.includes("mammut")||n.includes("ivory")||n.includes("elfenbein")||n.includes("certificate")||n.includes("zertifikat")||n.includes("clearance")||n.includes("ursprung");if(i&&n){i=o.toLowerCase();let t=null;i.includes("ursprung")||i.includes("origin")||i.includes("origine")?t="certificate-origin":i.includes("clearance")||i.includes("negativ")||i.includes("autorizzazione")||i.includes("autorizaciÃ³n")||i.includes("dÃ©charge")?t="clearance-certificate":(i.includes("uid")||i.includes("vat")||i.includes("tva"))&&(t="vat-uid-tva"),t&&(e.setAttribute("data-popup-repaired","true"),e.setAttribute("data-popup-type",t),e.style.cursor="pointer",e.setAttribute("title","Klicken zum Ã–ffnen"),n=e.cloneNode(!0),e.parentNode.replaceChild(n,e),n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("Hash-URL Span geklickt:",t);try{MicroModal.show("modal-"+t)}catch(e){console.error("Fehler beim Ã–ffnen des Hash-URL Span Modals:",t,e)}}))}}})}function u(t){if(document.getElementById("modal-request-only")){console.log("Aktualisiere Request-Only Formular mit Produktdaten...",t);var o=document.getElementById("requestOnlyForm-product_id"),i=document.getElementById("requestOnlyForm-product_title"),e=document.getElementById("requestOnlyForm-product_url"),n=document.getElementById("requestOnlyForm-product_sku"),r=document.getElementById("requestOnlyForm-product_price"),o=(o&&t.id&&(o.value=t.id),i&&t.title&&(i.value=t.title),e&&t.url&&(e.value=window.location.origin+t.url),n&&t.sku&&(n.value=t.sku),r&&t.price&&(r.value=t.price),document.getElementById("requestOnlyForm-display-title")),i=document.getElementById("requestOnlyForm-display-sku"),e=document.getElementById("requestOnlyForm-display-price"),o=(o&&t.title&&(o.textContent=t.title),i&&t.sku&&(i.textContent=t.sku),e&&t.price&&(n=parseFloat(t.price),isNaN(n)?e.textContent=t.price:(r=new Intl.NumberFormat(window.Shopify?.locale||"de-DE",{style:"currency",currency:window.Shopify?.currency?.active||"EUR"}).format(n),e.textContent=r)),document.getElementById("RequestOnlyForm-message"));if(o&&t.title){i=document.documentElement.lang||"de";let e=`Hallo,

ich interessiere mich fÃ¼r das Produkt "${t.title}"`;switch(t.sku&&(e+=` (SKU: ${t.sku})`),e+=".\n\nBitte kontaktieren Sie mich fÃ¼r weitere Informationen.\n\nVielen Dank!",i){case"en":e=`Hello,

I am interested in the product "${t.title}"`,t.sku&&(e+=` (SKU: ${t.sku})`),e+=".\n\nPlease contact me for more information.\n\nThank you!";break;case"it":e=`Ciao,

sono interessato al prodotto "${t.title}"`,t.sku&&(e+=` (SKU: ${t.sku})`),e+=".\n\nVi prego di contattarmi per ulteriori informazioni.\n\nGrazie!";break;case"es":e=`Hola,

estoy interesado en el producto "${t.title}"`,t.sku&&(e+=` (SKU: ${t.sku})`),e+=".\n\nPor favor contÃ¡ctenme para mÃ¡s informaciÃ³n.\n\nÂ¡Gracias!";break;case"fr":e=`Bonjour,

je suis intÃ©ressÃ© par le produit "${t.title}"`,t.sku&&(e+=` (SKU: ${t.sku})`),e+=".\n\nVeuillez me contacter pour plus d'informations.\n\nMerci !"}o.value=e}}else console.warn("Request-Only Modal nicht gefunden")}document.querySelectorAll("product-recommendations").forEach(e=>{a.observe(e,{childList:!0,subtree:!0})}),document.addEventListener("collection:request-only-buttons:loaded",function(e){console.log(`Collection Request-Only Buttons geladen: ${e.detail.count} Buttons`)})}});