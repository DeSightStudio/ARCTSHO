{%- comment -%}
  Renders the appropriate brand image based on current language and color scheme

  Accepts:
    - image_class: CSS classes to apply to the brand image
    - image_width: Width setting for the brand image
    - wrapper_class: CSS classes for the brand image wrapper div
    - loading: Loading attribute for the image (lazy, eager)
    - link_class: CSS classes for the wrapper link
    - color_scheme: Color scheme ID to determine if white brand image should be used
    - force_white: Force white brand image regardless of color scheme (true/false)
{%- endcomment -%}

{%- liquid
  # Get current language code
  assign current_language = localization.language.iso_code

  # Determine if we should use white brand image
  assign use_white_brand_image = false

  # Check if force_white is set
  if force_white == true or force_white == 'true'
    assign use_white_brand_image = true
  endif

  # Check color scheme for dark backgrounds
  if color_scheme and use_white_brand_image == false
    case color_scheme
      when 'scheme-3'
        assign use_white_brand_image = true
      when 'scheme-4'
        assign use_white_brand_image = true
      when 'scheme-5'
        assign use_white_brand_image = true
      when 'scheme-548c10fa-37f3-441f-92f9-890ada330aca'
        assign use_white_brand_image = true
    endcase
  endif

  # Determine which brand image to use based on current language and white/normal preference
  assign selected_brand_image = settings.brand_image

  # Check if language-specific brand image exists
  case current_language
    when 'de'
      if use_white_brand_image and settings.brand_image_white_de != blank
        assign selected_brand_image = settings.brand_image_white_de
      elsif settings.brand_image_de != blank
        assign selected_brand_image = settings.brand_image_de
      endif
    when 'en'
      if use_white_brand_image and settings.brand_image_white_en != blank
        assign selected_brand_image = settings.brand_image_white_en
      elsif settings.brand_image_en != blank
        assign selected_brand_image = settings.brand_image_en
      endif
    when 'it'
      if use_white_brand_image and settings.brand_image_white_it != blank
        assign selected_brand_image = settings.brand_image_white_it
      elsif settings.brand_image_it != blank
        assign selected_brand_image = settings.brand_image_it
      endif
    when 'fr'
      if use_white_brand_image and settings.brand_image_white_fr != blank
        assign selected_brand_image = settings.brand_image_white_fr
      elsif settings.brand_image_fr != blank
        assign selected_brand_image = settings.brand_image_fr
      endif
    when 'es'
      if use_white_brand_image and settings.brand_image_white_es != blank
        assign selected_brand_image = settings.brand_image_white_es
      elsif settings.brand_image_es != blank
        assign selected_brand_image = settings.brand_image_es
      endif
  endcase

  # Set default values if not provided
  unless image_width
    assign image_width = settings.brand_image_width
  endunless

  unless wrapper_class
    assign wrapper_class = 'footer-block__image-wrapper'
  endunless

  unless loading
    assign loading = 'lazy'
  endunless

  unless link_class
    assign link_class = 'smooth-scroll'
  endunless
-%}

{%- if selected_brand_image != blank -%}
  {%- assign brand_image_height = image_width | divided_by: selected_brand_image.aspect_ratio -%}
  <div
    class="{{ wrapper_class }}"
    style="max-width: min(100%, {{ image_width }}px);"
  >
    <a
      href="javascript:void(0)"
      onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
      class="{{ link_class }}"
    >
      {{
        selected_brand_image
        | image_url: width: 1100
        | image_tag:
          loading: loading,
          widths: '50, 100, 150, 200, 300, 400, 550, 800, 1100',
          height: brand_image_height,
          width: image_width,
          class: image_class
      }}
    </a>
  </div>
{%- endif -%}
