/* ===================================================== */
/* :::::::::: BUCKS Currency Converter Styling :::::::::: */
/* ===================================================== */

// Custom styling for BUCKS Currency Converter App
// Targets the DOM structure from external BUCKS app

.buckscc-currency-box {

    // Main currency wrapper styling
    .buckscc-currency-wrapper {

        // Style the main select button
        .buckscc-select {

            // Override the styled select button
            .buckscc-select-styled {
                border-radius: 4px;
                padding: 8px 12px;
                transition: all 0.3s ease;
                @include screen(med) {
                    background-color: transparent !important;
                }
                // Hover effect
                &:hover {
                    background-color: darken($mainColor, 10%) !important;
                    @include screen(med) {
                        background-color: transparent !important;
                    }
                }

                // Selected currency text styling
                .bucks-selected {
                    color: white !important;
                    font-weight: 500;
                    @include screen(med) {
                        margin: 0px !important;
                    }
                    // Add currency symbols after the currency codes
                    &::after {
                        margin-left: 4px;
                        font-weight: normal;
                    }
                }

                // Currency symbols are added via JavaScript

                // Style the dropdown arrow - Make it more prominent like language switcher
                .bucks__folder-collapse_btn {
                    display: inline-block !important;
                    margin-left: 8px !important;

                    svg {
                        stroke: white !important;
                        fill: white !important;
                        width: 10px !important;
                        height: 6px !important;
                        transform: rotate(0deg) !important;
                        transition: transform 0.2s ease !important;
                    }
                }

                // Rotate arrow when dropdown is open
                &.buckscc-select-open .bucks__folder-collapse_btn svg {
                    transform: rotate(180deg) !important;
                }
            }

            // Style the dropdown options
            .buckscc-select-options {
                background-color: $mainColor !important;
                border: none !important;
                border-radius: 4px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                margin-top: 4px;

                // Individual option styling
                li {
                    padding: 8px 12px;
                    transition: background-color 0.2s ease;

                    &:hover {
                        background-color: darken($mainColor, 15%) !important;
                    }

                    // Currency item text
                    .bucksItem {
                        color: white !important;
                        font-weight: 500;

                        // Add currency symbols after the currency codes in dropdown
                        &::after {
                            margin-left: 4px;
                            font-weight: normal;
                            opacity: 0.8;
                        }
                    }
                }

                // Currency symbols in dropdown are added via JavaScript
            }
        }
    }
}

// Alternative approach using attribute selectors for more reliable targeting
.buckscc-currency-box {

    // Target by ID for more specific styling
    #bucksSelector + .buckscc-select-styled {

        // Ensure text is visible
        .bucks-selected {
            color: white !important;
            min-width: 50px;
        }
    }

    // Style options container
    .buckscc-select-options {
        background-color: $mainColor !important;

        li {
            &:hover {
                background-color: darken($mainColor, 10%) !important;
            }

            .bucksItem {
                color: white !important;
            }
        }
    }
}

// Note: Currency symbols are added via JavaScript
// since CSS :contains() is not widely supported

// Desktop Header specific styling - 1:1 wie Language Switcher
.desktop-bucks-currency-wrapper {
    display: inline-flex;
    align-items: center;
    margin-left: 0.5rem; // Weniger Abstand zum Sprachenwechsler

    .buckscc-currency-box {
        // Container kompakt wie Language Switcher
        width: auto !important;
        min-width: auto !important;
        display: inline-block !important;

        .buckscc-currency-wrapper {
            width: auto !important;
            min-width: auto !important;
            display: inline-block !important;

            .buckscc-select {
                width: auto !important;
                min-width: auto !important;
                display: inline-block !important;

                .buckscc-select-styled {
                    // 1:1 wie Language Switcher Button
                    background-color: transparent !important;
                    border: none !important;
                    padding: 0 2.7rem 0 1.2rem !important; // Exakt wie Language Switcher
                    height: 3.8rem !important; // Exakt wie Language Switcher
                    width: max-content !important;
                    border-radius: 0 !important; // Kein Border-radius wie Language Switcher
                    transition: all 0.3s ease;
                    display: flex !important;
                    align-items: center !important;
                    position: relative !important; // WICHTIG für absolute Positionierung des Icons

                    .bucks-selected {
                        color: $mainColor !important;
                        font-weight: normal !important; // Wie Language Switcher
                        font-family: inherit !important; // Wie Language Switcher
                        font-size: inherit !important; // Wie Language Switcher
                        white-space: nowrap;
                        margin: 0 !important;
                    }

                    // JavaScript-generierte Chevron-Icons stylen (Desktop)
                    .custom-chevron {
                        position: absolute !important;
                        right: 1.2rem !important;
                        top: 50% !important;
                        transform: translateY(-50%) !important;
                        width: 1rem !important;
                        height: 1rem !important;
                        transition: transform 0.2s ease !important;
                        pointer-events: none !important;
                        z-index: 10 !important;
                        display: flex !important;
                        align-items: center !important;
                        justify-content: center !important;

                        svg {
                            width: 1rem !important;
                            height: 1rem !important;
                            fill: $mainColor !important;
                        }
                    }

                    // Rotate arrow when dropdown is open in desktop
                    &.buckscc-select-open .custom-chevron {
                        transform: translateY(-50%) rotate(180deg) !important;
                    }

                    // Verstecke das originale BUCKS-Icon falls vorhanden
                    .bucks__folder-collapse_btn {
                        display: none !important;
                    }

                    // Hover-Effekt wie Language Switcher (gar kein Hover)
                    &:hover {
                        background-color: transparent !important;
                        transform: none !important;
                    }
                }

                // Dropdown-Optionen 1:1 wie Language Switcher
                .buckscc-select-options {
                    background-color: $mainColor !important;
                    border-radius: 12px !important;
                    box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.25) !important;
                    border: 1px solid transparent !important;
                    min-width: 160px !important;
                    padding: 0 !important; // Kein Padding wie Language Switcher
                    margin: 0 !important;

                    // Trennlinien entfernen
                    * {
                        border: none !important;
                        border-width: 0 !important;
                        border-style: none !important;
                    }

                    li {
                        padding: 0 !important;
                        margin: 0 !important;
                        border: none !important;

                        &:hover {
                            background-color: rgba(255, 255, 255, 0.1) !important; // Heller Hover wie Language Switcher
                        }

                        .bucksItem {
                            color: white !important;
                            font-family: inherit !important; // Wie Language Switcher
                            padding: 1.2rem !important; // Wie Language Switcher
                            display: block !important;
                            text-decoration: none !important;
                            border: none !important;
                        }
                    }
                }
            }
        }
    }
}

// Mobile Drawer specific styling - Einfaches Design ohne Hintergrund/Icons
.menu-drawer {
    .mobile-bucks-currency-wrapper {
        .buckscc-currency-box {
            .buckscc-currency-wrapper {
                @include screen(med) {
                    margin: 0 0 5px 0 !important;
                }
                .buckscc-select {
                    .buckscc-select-styled {
                        // Override alle BUCKS Standard-Styles
                        background-color: transparent !important;
                        border: none !important;
                        padding: 1rem 0 !important; // Nur oben/unten Padding

                        .bucks-selected {
                            color: white !important;
                            font-family: 'Cormorant Garamond', serif !important;
                        }

                        // JavaScript übernimmt die Struktur - nur Basis-Styling
                        position: relative !important;
                        width: 100% !important;

                        // JavaScript-generierte Content-Wrapper
                        .mobile-currency-content {
                            // Wird durch JavaScript inline gestylt
                        }

                        .mobile-currency-text {
                            // Gleiche Styles wie andere Mobile Menu Labels
                            color: $whiteColor !important;
                            font-family: 'Cormorant Garamond', serif !important;
                            font-size: $fontSizeRegular !important;
                            font-weight: normal !important;
                            line-height: inherit !important;
                        }

                        // JavaScript-generierte Chevron-Icons für Mobile stylen
                        .custom-chevron {
                            transition: transform 0.2s ease !important;
                            pointer-events: none !important;

                            svg {
                                fill: $whiteColor !important;
                            }
                        }

                        // Rotate arrow when dropdown is open in mobile
                        &.buckscc-select-open .custom-chevron {
                            transform: rotate(180deg) !important;
                        }

                        // Verstecke das originale BUCKS-Icon falls vorhanden
                        .bucks__folder-collapse_btn {
                            display: none !important;
                        }

                        // KEINE Icons
                        &::before {
                            display: none !important;
                        }

                        // KEINE Hover-Effekte
                        &:hover,
                        &:focus {
                            background-color: transparent !important;
                            transform: none !important;
                        }
                    }

                    .buckscc-select-options {
                        padding: 0 !important;
                        margin: 0 !important;
                        border-radius: 12px !important;
                        box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.25) !important;
                        background: var(--main-color) !important; // Grüner Hintergrund
                        border: none !important;
                        border-width: 0 !important;
                        border-style: none !important;
                        min-width: 160px !important;

                        // Korrekte Positionierung wie Sprachenwechsler
                        position: absolute !important;
                        top: auto !important;
                        bottom: 100% !important; // Oberhalb des Buttons öffnen
                        left: 0 !important;
                        right: auto !important;
                        margin-bottom: 8px !important; // Abstand zum Button
                        z-index: 99999 !important; // Höher als Sprachenwechsler

                        // Zusätzliche Override für alle Child-Elemente
                        * {
                            border: none !important;
                            border-width: 0 !important;
                            border-style: none !important;
                        }

                        li {
                            padding: 0 !important;
                            margin: 0 !important;

                            // Hover-Effekt für Dropdown-Items
                            &:hover {
                                background-color: rgba(255, 255, 255, 0.1) !important;
                            }

                            .bucksItem {
                                color: white !important;
                                font-family: 'Cormorant Garamond', serif !important;
                                padding: 12px 16px !important;
                                display: block !important;
                                text-decoration: none !important;

                                // KEINE Icons
                                &::before {
                                    display: none !important;
                                }

                                // KEINE Checkmarks
                                &.active::after {
                                    display: none !important;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

// Responsive adjustments
@media screen and (max-width: 749px) {
    .buckscc-currency-box {
        .buckscc-select-styled {
            padding: 6px 10px;
            font-size: 14px;
        }

        .buckscc-select-options li {
            padding: 6px 10px;
            font-size: 14px;
        }
    }
}

// Ensure proper z-index for dropdown
.buckscc-select-options {
    z-index: 9999 !important;
    position: absolute !important;
}

// Additional styling for flag integration if needed
.buckscc-currency-box {
    .flagWrapper {
        .hxoFlag {
            // Ensure flags are visible on colored background
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }
    }
}
